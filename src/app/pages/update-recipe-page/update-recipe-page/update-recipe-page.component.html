<div class="update-recipe display-flex">

  <div class="update-recipe-title display-flex">[Редагування рецепту:]</div>

  <form class="update-recipe-form display-flex" [formGroup]="form">

<!--    <div class="update-recipe-form-title">-->
<!--      <label>-->
<!--&lt;!&ndash;        <div class="update-recipe-form-title-name">Назва рецепта</div>&ndash;&gt;-->
<!--        <div>-->
<!--          <input type="text" formControlName="title" placeholder="Назва рецепта">-->
<!--        </div>-->
<!--      </label>-->
<!--    </div>-->
    <div class="update-recipe-form-title display-flex">
      <div class="update-recipe-form-title-title">Назва:</div>
      <div class="update-recipe-form-title-content display-flex">{{recipe.title}}</div>
    </div>

    <div class="update-recipe-form-cooking">
      <label class="display-flex">
        <div class="update-recipe-form-cooking-name">Спосіб приготування:</div>
        <div class="update-recipe-form-cooking-input display-flex">
          <textarea class="display-flex" rows="4" type="text" formControlName="description" placeholder="Спосіб приготування"></textarea>
        </div>
      </label>
    </div>

    <div class="update-recipe-form-category">
      <label class="display-flex">
        <div class="update-recipe-form-category-title display-flex">Категорія рецепта</div>
        <div class="update-recipe-form-category-select display-flex">
          <select class="display-flex" formControlName="recipeCategoryId">
            <option disabled>Виберіть категорію рецепта</option>
            <option *ngFor="let category of categories" [ngValue]="category.id">{{category.name}}</option>
          </select>
        </div>
      </label>
    </div>


    <div class="update-recipe-form-ingredients display-flex">
      <div class="update-recipe-form-ingredients-title">Інгредієнти:</div>

      <div class="update-recipe-form-ingredients-list display-flex" formArrayName="rawIngredientWithWeights">

        <div class="update-recipe-form-ingredient-titles display-flex">
          <div class="update-recipe-form-ingredient-number-title">№</div>
          <div class="update-recipe-form-ingredient-category-title">Категорія</div>
          <div class="update-recipe-form-ingredient-id-title">Інгредієнт</div>
          <div class="update-recipe-form-ingredient-weight-title">Вага</div>
        </div>

        <div class="update-recipe-form-ingredient display-flex" *ngFor="let ingredient of getIngredients().controls; let i=index" [formGroupName]="i">
          <div class="update-recipe-form-ingredient-number">{{i+1}}</div>

          <div class="update-recipe-form-ingredient-category">
            <label>
              <select #mySelect formControlName="category" (change)="select(mySelect.value, i)">
                <option [ngValue]="null" disabled>Виберіть категорію інгредієнта</option>
                <option *ngFor="let category of ingredientCategories"
                        [ngValue]="category.id">{{category.name}}</option>
              </select>
            </label>
          </div>

          <div class="update-recipe-form-ingredient-id">
            <label>
              <select formControlName="id" required>
                <option [ngValue]="null" disabled>Виберіть інгредієнт</option>
                <option *ngFor="let ingredient of selectedIngredients[i].listOfIngredients"
                        [ngValue]="ingredient.id">{{ingredient.name_ukr}}</option>
              </select>
            </label>
          </div>

          <div class="update-recipe-form-ingredient-weight">
            <label>
              <div class="update-recipe-form-ingredient-weight-input">
                <input type="number" formControlName="weight" placeholder="Вага">
              </div>
            </label>
          </div>

          <div class="update-recipe-form-ingredient-delete-button display-flex">
            <button *ngIf="getIngredients().controls.length > 1" type="button" (click)="removeIngredient(i)">x</button>
          </div>
        </div>
        <div class="update-recipe-form-ingredient-add-button display-flex">
          <button type="button" (click)="addIngredient()">{{"+ + +"}}</button>
        </div>

      </div>
    </div>

    <div class="update-recipe-form-image">
      <label class="display-flex">
        <div class="update-recipe-form-picture-title">Picture</div>
        <div class="update-recipe-form-picture-input display-flex">
          <input class="display-flex" (change)="onChange($event)" placeholder="Picture" type="file"
                 formControlName="picture">
        </div>
      </label>
    </div>
  </form>

  <div class="update-recipe-form-button">
    <button [disabled]="form.invalid" (click)="submit()" type="submit">Зберегти</button>
  </div>
</div>
